<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/messages/messages.js - Itsa</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="Itsa"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/Array.html">Array</a></li>
            
                <li><a href="../classes/BaseClass.html">BaseClass</a></li>
            
                <li><a href="../classes/Classes.html">Classes</a></li>
            
                <li><a href="../classes/DD.html">DD</a></li>
            
                <li><a href="../classes/Dialog.html">Dialog</a></li>
            
                <li><a href="../classes/document.html">document</a></li>
            
                <li><a href="../classes/Element.html">Element</a></li>
            
                <li><a href="../classes/ElementArray.html">ElementArray</a></li>
            
                <li><a href="../classes/Event.html">Event</a></li>
            
                <li><a href="../classes/Event.Emitter.html">Event.Emitter</a></li>
            
                <li><a href="../classes/Event.Listener.html">Event.Listener</a></li>
            
                <li><a href="../classes/FocusManager.html">FocusManager</a></li>
            
                <li><a href="../classes/Function.html">Function</a></li>
            
                <li><a href="../classes/HTMLElement.html">HTMLElement</a></li>
            
                <li><a href="../classes/Icons.html">Icons</a></li>
            
                <li><a href="../classes/IO.html">IO</a></li>
            
                <li><a href="../classes/ITSA.html">ITSA</a></li>
            
                <li><a href="../classes/Messages.html">Messages</a></li>
            
                <li><a href="../classes/Node.html">Node</a></li>
            
                <li><a href="../classes/NodePlugin.html">NodePlugin</a></li>
            
                <li><a href="../classes/NS-vdom.html">NS-vdom</a></li>
            
                <li><a href="../classes/Object.html">Object</a></li>
            
                <li><a href="../classes/Panel.html">Panel</a></li>
            
                <li><a href="../classes/Promise.html">Promise</a></li>
            
                <li><a href="../classes/String.html">String</a></li>
            
                <li><a href="../classes/USERAGENT.html">USERAGENT</a></li>
            
                <li><a href="../classes/Utils.html">Utils</a></li>
            
                <li><a href="../classes/vnode.html">vnode</a></li>
            
                <li><a href="../classes/window.html">window</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/attribute-extractor.html">attribute-extractor</a></li>
            
                <li><a href="../modules/dialog.html">dialog</a></li>
            
                <li><a href="../modules/drag.html">drag</a></li>
            
                <li><a href="../modules/drag-drop.html">drag-drop</a></li>
            
                <li><a href="../modules/element-array.html">element-array</a></li>
            
                <li><a href="../modules/event.html">event</a></li>
            
                <li><a href="../modules/event-blurnode.html">event-blurnode</a></li>
            
                <li><a href="../modules/event-dom.html">event-dom</a></li>
            
                <li><a href="../modules/event-emitter.html">event-emitter</a></li>
            
                <li><a href="../modules/event-focusnode.html">event-focusnode</a></li>
            
                <li><a href="../modules/event-hover.html">event-hover</a></li>
            
                <li><a href="../modules/event-listener.html">event-listener</a></li>
            
                <li><a href="../modules/event-mobile.html">event-mobile</a></li>
            
                <li><a href="../modules/extend-document.html">extend-document</a></li>
            
                <li><a href="../modules/extend-element.html">extend-element</a></li>
            
                <li><a href="../modules/extra_classes.js.html">extra/classes.js</a></li>
            
                <li><a href="../modules/focusmanager.html">focusmanager</a></li>
            
                <li><a href="../modules/html-parser.html">html-parser</a></li>
            
                <li><a href="../modules/icons.html">icons</a></li>
            
                <li><a href="../modules/io.html">io</a></li>
            
                <li><a href="../modules/io-assets.html">io-assets</a></li>
            
                <li><a href="../modules/io-cors.html">io-cors</a></li>
            
                <li><a href="../modules/io-jsonp.html">io-jsonp</a></li>
            
                <li><a href="../modules/io-transfer.html">io-transfer</a></li>
            
                <li><a href="../modules/io-xml.html">io-xml</a></li>
            
                <li><a href="../modules/itsa.build.html">itsa.build</a></li>
            
                <li><a href="../modules/js-ext.html">js-ext</a></li>
            
                <li><a href="../modules/lib_array.js.html">lib/array.js</a></li>
            
                <li><a href="../modules/lib_function.js.html">lib/function.js</a></li>
            
                <li><a href="../modules/lib_object.js.html">lib/object.js</a></li>
            
                <li><a href="../modules/lib_promise.s.html">lib/promise.s</a></li>
            
                <li><a href="../modules/lib_string.js.html">lib/string.js</a></li>
            
                <li><a href="../modules/messages.html">messages</a></li>
            
                <li><a href="../modules/node-parser.html">node-parser</a></li>
            
                <li><a href="../modules/node-plugin.html">node-plugin</a></li>
            
                <li><a href="../modules/node-win.html">node-win</a></li>
            
                <li><a href="../modules/panel.html">panel</a></li>
            
                <li><a href="../modules/useragent.html">useragent</a></li>
            
                <li><a href="../modules/utils.html">utils</a></li>
            
                <li><a href="../modules/vdom.html">vdom</a></li>
            
                <li><a href="../modules/vdom-ns.html">vdom-ns</a></li>
            
                <li><a href="../modules/vnode.html">vnode</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src/messages/messages.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * Creating floating Panel-nodes which can be shown and hidden.
 *
 *
 * &lt;i&gt;Copyright (c) 2014 ITSA - https://github.com/itsa&lt;/i&gt;
 * New BSD License - http://choosealicense.com/licenses/bsd-3-clause/
 *
 *
 * @module messages
 * @class Messages
 * @since 0.0.1
*/

require(&#x27;js-ext&#x27;);
require(&#x27;polyfill&#x27;);

(function (global) {

    &quot;use strict&quot;;

    var NAME = &#x27;[messages]: &#x27;,
        MESSAGE_LEVELS = {
            1: &#x27;message&#x27;,
            2: &#x27;warn&#x27;,
            3: &#x27;error&#x27;,
            4: &#x27;statusmessage&#x27; // message that should hold for minimum time, and/or removes by itself (IO uses these)
        },
        createHashMap = require(&#x27;js-ext/extra/hashmap.js&#x27;).createMap,
        later = require(&#x27;utils&#x27;).later,
        messages, Event;

    global._ITSAmodules || Object.protectedProp(global, &#x27;_ITSAmodules&#x27;, createHashMap());

/*jshint boss:true */
    if (messages=global._ITSAmodules.messages) {
/*jshint boss:false */
        module.exports = messages; // messages was already created
        return;
    }

    Event = require(&#x27;event&#x27;);

    messages = {
        /**
         * Sends a message (emits) and returns a promise. All option-properties will be merged into the promise.
         * (even when not defined in the api)
         *
         * @method message
         * @param message {String} The message to be send
         * @param [options] {Object} The instance that is going to detach the customEvent
         * @param [options.emitter=&#x27;global&#x27;] {String} the emitter of the message, will be used as emitterName of the customEvent.
         * @param [options.icon] {String} an icon-name to be used (fe &quot;alert&quot;). The icon-name should be defined by the &#x60;icons&#x60;-module.
         * @param [options.level=1] {Number} The level --&gt; 1=&#x27;message&#x27;, 2=&#x27;warn&#x27;, 3=&#x27;error&#x27;, 4=&#x27;statusmessage&#x27;.
         * @param [options.header] {String} Can be used by a messagehandler to render the header.
         * @param [options.footer] {String} Can be used by a messagehandler to render the footer.
         * @param [options.timeout] {Number} When specified, the promise will be resolved after this period of time.
         * @param [options.stayActive] {Number} When specified, the promise won&#x27;t resolved within this period of time.
         * @return {Promise}
         * @since 0.0.1
        */
        message: function(message, options) {
            var messagePromise = global.Promise.manage(),
                emitter, level, timeout, icon, stayActive;
            message || (message=&#x27;&#x27;);
            options || (options={});
            emitter = options.emitter || &#x27;global&#x27;;
            icon = options.icon;
            level = MESSAGE_LEVELS[options.level] || MESSAGE_LEVELS[1];
            timeout = options.timeout;
            stayActive = options.stayActive;
            messagePromise.merge(options);
            stayActive &amp;&amp; messagePromise.stayActive(stayActive);
            if (icon) {
                message = &#x27;&lt;div class=&quot;dialog-message-icon&quot;&gt;&lt;i icon=&quot;&#x27;+icon+&#x27;&quot;&gt;&lt;/i&gt;&lt;/div&gt;&lt;div class=&quot;dialog-message&quot;&gt;&#x27;+message+&#x27;&lt;/div&gt;&#x27;;
            }
            messagePromise.content = message;
            if ((typeof timeout===&#x27;number&#x27;) &amp;&amp; (timeout&gt;0)) {
                // with nothing to notify it was timeout
                later(messagePromise.fulfill, timeout);
            }
            Event.emit(options.target || global, emitter+&#x27;:&#x27;+level, {messagePromise: messagePromise});
            return messagePromise;
        },

        /**
         * Sends a simple message
         *
         * @method alert
         * @param message {String} The message to be send
         * @param [icon] {String} an icon-name to be used (fe &quot;alert&quot;). The icon-name should be defined by the &#x60;icons&#x60;-module.
         * @return {Promise}
         * @since 0.0.1
        */
        alert: function(message, icon) {
            return this.message(message, {
                footer: &#x27;&lt;button class=&quot;pure-button pure-button-primary&quot;&gt;Ok&lt;/button&gt;&#x27;,
                icon: icon
            });
        },

        /**
         * Sends a warning-message.
         *
         * @method warn
         * @param message {String} The message to be send
         * @return {Promise}
         * @since 0.0.1
        */
        warn: function(message) {
            return this.message(message, {
                footer: &#x27;&lt;button class=&quot;pure-button pure-button-primary&quot;&gt;Ok&lt;/button&gt;&#x27;,
                icon: &#x27;alert&#x27;,
                level: 2
            });
        },
        /**
         * Sends a prompt-message with an input-element.
         *
         * @method prompt
         * @param message {String} The message to be send
         * @param [options] {Object} The instance that is going to detach the customEvent
         * @param [options.emitter=&#x27;global&#x27;] {String} the emitter of the message, will be used as emitterName of the customEvent.
         * @param [options.defaultValue] {String} input&#x27;s default value.
         * @param [options.label] {String} The label for the input-element.
         * @param [options.placeholder] {String} The placeholder for the input-element.
         * @param [options.icon] {String} an icon-name to be used (fe &quot;alert&quot;). The icon-name should be defined by the &#x60;icons&#x60;-module.
         * @param [options.header] {String} Can be used by a messagehandler to render the header.
         * @param [options.footer] {String} Can be used by a messagehandler to render the footer.
         * @param [options.level=1] {Number} The level --&gt; 1=&#x27;message&#x27;, 2=&#x27;warn&#x27;, 3=&#x27;error&#x27;, 4=&#x27;statusmessage&#x27;.
         * @param [options.timeout] {Number} When specified, the promise will be resolved after this period of time.
         * @param [options.stayActive] {Number} When specified, the promise won&#x27;t resolved within this period of time.
         * @return {Promise}
         * @since 0.0.1
        */
        prompt: function(message, options) {
            var placeholder, defaultValue, placeholder, label, icon;
            options || (options={});
            defaultValue = options.defaultValue;
            label = options.label;
            icon = options.icon;
            defaultValue = defaultValue ? &#x27; value=&quot;&#x27;+defaultValue+&#x27;&quot;&#x27; : &#x27;&#x27;;
            placeholder = placeholder ? &#x27; placeholder=&quot;&#x27;+placeholder+&#x27;&quot;&#x27; : &#x27;&#x27;;
            if ((typeof message ===&#x27;string&#x27;) || (message!==&#x27;&#x27;)) {
                message = &#x27;&lt;div class=&quot;dialog-prompt&quot;&gt;&#x27;+message+&#x27;&lt;/div&gt;&#x27;;
            }
            else {
                message = &#x27;&#x27;;
            }
            label = (typeof label===&#x27;string&#x27;) ? (label=&#x27;&lt;label for=&quot;iprompt&quot;&gt;&#x27;+label+&#x27;&lt;/label&gt;&#x27;) : &#x27;&#x27;;
            return this.message(
                &#x27;&lt;div class=&quot;pure-form&quot;&gt;&#x27;+message+label+&#x27;&lt;input id=&quot;iprompt&quot; type=&quot;text&quot;&#x27;+placeholder+defaultValue+&#x27; fm-defaultitem=&quot;true&quot; fm-primaryonenter=&quot;true&quot;&gt;&lt;/div&gt;&#x27;,
                {
                    footer: &#x27;&lt;button is=&quot;cancel&quot; class=&quot;pure-button&quot;&gt;Cancel&lt;/button&gt;&lt;button is=&quot;ok&quot; class=&quot;pure-button pure-button-primary&quot;&gt;Ok&lt;/button&gt;&#x27;,
                    icon: icon
                }
            ).then(function(container) {
                var button = container.getElement(&#x27;button&#x27;);
                if (button.getAttr(&#x27;is&#x27;)===&#x27;ok&#x27;) {
                    return container.getElement(&#x27;input&#x27;).getValue();
                }
            });
        },
        /**
         * To catch syste-errors into the message system. When set, errors won&#x27;t appear in the console.
         *
         * @method catchErrors
         * @param catchOrNot {Boolean} Whether errors should be catched or not.
         * @since 0.0.1
        */
        catchErrors: function(catchOrNot) {
            // DO NOT use &#x60;this&#x60; --&gt; when merged, &#x60;this&#x60; will become the host
            // while &#x60;global.onerror&#x60; refers to &#x60;messages&#x60;
            messages._catchErrors = catchOrNot;
        }
    };

    global.onerror = function(msg, url, line) {
        if (messages._catchErrors) {
            messages.message(msg, {
                header: &#x27;Javascript-error (line &#x27;+line+&#x27;)&#x27;,
                footer: url,
                icon: &#x27;error&#x27;,
                level: 3
            });
            return true;
        }
    };

    module.exports = messages;

}(typeof global !== &#x27;undefined&#x27; ? global : /* istanbul ignore next */ this));

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
